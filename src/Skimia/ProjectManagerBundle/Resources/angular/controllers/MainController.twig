SkimiaProjectManager_SPM_Controllers.controller('MainCtrl',['$rootScope','$scope','s-auth','Projects','$http',function($rootScope,$scope,auth,Projects,$http){
    $scope.projects = Projects.query();
    $scope.auth = {};
    $http.get('https://api.github.com/repos/skimia/ProjectManager/commits').success(function(data, status, headers, config) {
        $rootScope.commits = data;
    });
    $rootScope.getRev = function(){
        if($rootScope.commits != undefined)
            return $rootScope.commits[0].sha.substring(0,10);
    }
    $scope.login = function(){
        auth.authenticate($scope.auth.ident,$scope.auth.password);
    };
    $scope.logout = function(){
        auth.logout();
    };
}]);