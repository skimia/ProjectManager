
{{module_var}}.controller('{{base_name}}.ListController',['$scope','$repo','$stateParams',function($scope, $repo,$stateParams){
	$repo.model('Bundle').get($stateParams.bundleId ,function(data){
        $scope.entities = data.entities;
    });
}]);

{{module_var}}.controller('{{base_name}}.ShowController',['$scope','$stateParams','$repo',function($scope, $stateParams, $repo){
	$repo.model('Entity').get($stateParams.entityId, function(data){
        $scope.entity = data;
    });
}]);

{{module_var}}.controller('{{base_name}}.EditController',['$scope','$stateParams', '$state','Entities','mc-service',function($scope, $stateParams, $state, Entities,flash){
	$scope.data = Entities.get({ entityId:$stateParams.entityId},function(){$scope.entityEditLoaded = true});
        $scope.submit = function(){
            $scope.data.$save(function()
                {
                    $state.go('^.show',{entityId:$scope.data.id},{'reload':true});
                    flash.add('success','Message success Edit');
                });
        }
}]);

{{module_var}}.controller('{{base_name}}.CreateController',['$scope','$stateParams','$state','Entities','mc-service',function($scope, $stateParams, $state, Entities,flash){
	$scope.data = {};
    $scope.data.bundle = $stateParams.bundleId;
        $scope.submit = function(){
           var saved = Entities.save($scope.data,function()
                {
                    $state.go('^.show',{entityId:saved.id});
                    flash.add('success','Message success Create');
                }
            );
        }
}]);

{{module_var}}.controller('{{base_name}}.DeleteController',['$scope','$stateParams','$state','Entities','mc-service',function($scope, $stateParams, $state, Entities,flash){
    Entities.delete({ entityId:$stateParams.entityId},function()
                {
                    $state.go('^.list');
                    flash.add('success','Message success Delete');
                });
}]);

